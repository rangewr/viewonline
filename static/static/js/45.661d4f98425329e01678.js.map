{"version":3,"sources":["webpack:///static/js/45.661d4f98425329e01678.js","webpack:///./src/views/addInfo/communityManage.vue","webpack:///communityManage.vue","webpack:///./src/views/addInfo/communityManage.vue?5fc0"],"names":["webpackJsonp","502","module","exports","__webpack_require__","Component","590","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_axios__","__WEBPACK_IMPORTED_MODULE_0_axios___default","n","__WEBPACK_IMPORTED_MODULE_1_qs__","__WEBPACK_IMPORTED_MODULE_1_qs___default","data","_this","this","model1","model2","model3","communityId","communityName","formAdd","input1","input2","columns","title","align","key","render","h","params","props","type","size","style","marginRight","on","click","modelUpdate","index","meetManage","modelDel","data1","formDynamic","items","created","reloadPage","methods","updateName","_this2","a","post","stringify","id","communityname","then","response","data0","ErrCode","$Message","success","error","ErrMsg","catch","console","log","modelAdd","addOk","handleAdd","addCancel","Id","updateOk","updateCancel","Communityname","delOk","handleRemove","delCancel","$router","push","path","query","_this3","_this4","_this5","get","Cookies","remove","window","location","reload","Result","709","_vm","_h","$createElement","_c","_self","attrs","span","staticClass","_v","on-ok","on-cancel","model","callback","$$v","expression","label-position","label","_s","ref","label-width","long","icon","$event","staticRenderFns"],"mappings":"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","file":"static/js/45.661d4f98425329e01678.js","sourcesContent":["webpackJsonp([45],{\n\n/***/ 502:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(6)(\n  /* script */\n  __webpack_require__(590),\n  /* template */\n  __webpack_require__(709),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 590:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_qs__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_qs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_qs__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        var _this = this;\n\n        return {\n            model1: false,\n            model2: false,\n            model3: false,\n            communityId: 0,\n            communityName: \"\",\n            formAdd: {\n                input1: \"\",\n                input2: \"\"\n            },\n            columns: [{\n                title: '社区编号',\n                align: 'center',\n                key: 'Id'\n            }, {\n                title: '社区名称',\n                align: 'center',\n                key: 'Communityname'\n            }, {\n                title: '操作',\n                key: 'action',\n                align: 'center',\n                render: function render(h, params) {\n                    return h('div', [h('Button', {\n                        props: {\n                            type: 'success',\n                            size: 'small'\n                        },\n                        style: {\n                            marginRight: '5px'\n                        },\n                        on: {\n                            click: function click() {\n                                _this.modelUpdate(params.index);\n                            }\n                        }\n                    }, '修改'), h('Button', {\n                        props: {\n                            type: 'primary',\n                            size: 'small'\n                        },\n                        style: {\n                            marginRight: '5px'\n                        },\n                        on: {\n                            click: function click() {\n                                _this.meetManage(params.index);\n                            }\n                        }\n                    }, '会议'), h('Button', {\n                        props: {\n                            type: 'error',\n                            size: 'small'\n                        },\n                        on: {\n                            click: function click() {\n                                _this.modelDel(params.index);\n                            }\n                        }\n                    }, '删除')]);\n                }\n            }],\n            data1: [],\n            formDynamic: {\n                items: [{\n                    value: 'xin'\n                }]\n            }\n        };\n    },\n    created: function created() {\n        this.reloadPage();\n    },\n\n    methods: {\n        updateName: function updateName() {\n            var _this2 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0_axios___default.a.post(\"/admin/UpdateCommunityInfo\", __WEBPACK_IMPORTED_MODULE_1_qs___default.a.stringify({\n                id: this.communityId,\n                communityname: this.formAdd.input2\n            })).then(function (response) {\n                var data0 = response.data;\n                if (data0.ErrCode == 0) {\n                    _this2.$Message.success(\"修改成功\");\n                    _this2.formAdd.input2 = \"\";\n                    _this2.reloadPage();\n                } else {\n                    _this2.$Message.error(data0.ErrMsg);\n                }\n            }).catch(function (error) {\n                console.log(\"修改社区异常\");\n                console.log(error);\n            });\n        },\n        modelAdd: function modelAdd() {\n            this.model1 = true;\n        },\n        addOk: function addOk() {\n            this.model1 = false;\n            if (this.formAdd.input1 != \"\") {\n                this.handleAdd();\n            } else {\n                this.$Message.error(\"社区名不能为空\");\n            }\n        },\n        addCancel: function addCancel() {\n            this.model1 = false;\n            this.formAdd.input1 = \"\";\n        },\n        modelUpdate: function modelUpdate(index) {\n            this.communityId = this.data1[index].Id;\n            this.model2 = true;\n        },\n        updateOk: function updateOk() {\n            this.model2 = false;\n            if (this.formAdd.input2 != \"\") {\n                this.updateName();\n            } else {\n                this.$Message.error(\"社区名不能为空\");\n            }\n        },\n        updateCancel: function updateCancel() {\n            this.model2 = false;\n            this.formAdd.input2 = \"\";\n        },\n        modelDel: function modelDel(index) {\n            this.model3 = true;\n            this.communityName = this.data1[index].Communityname;\n            this.communityId = this.data1[index].Id;\n        },\n        delOk: function delOk() {\n            this.model3 = false;\n            this.handleRemove();\n        },\n        delCancel: function delCancel() {\n            this.model3 = false;\n        },\n        meetManage: function meetManage(index) {\n            this.$router.push({\n                path: '/addInfo/meetManage', query: {\n                    index: this.data1[index].Id\n                }\n            });\n        },\n        handleAdd: function handleAdd() {\n            var _this3 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0_axios___default.a.post(\"/admin/AddCommunityInfo\", __WEBPACK_IMPORTED_MODULE_1_qs___default.a.stringify({\n                communityname: this.formAdd.input1\n            })).then(function (response) {\n                var data0 = response.data;\n                if (data0.ErrCode == 0) {\n                    _this3.$Message.success(\"添加社区成功\");\n                    _this3.formAdd.input1 = \"\";\n                    _this3.reloadPage();\n                } else {\n                    _this3.$Message.error(data0.ErrMsg);\n                }\n            }).catch(function (error) {\n                console.log('添加社区异常');\n                console.log(error);\n            });\n        },\n        handleRemove: function handleRemove() {\n            var _this4 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0_axios___default.a.post(\"/admin/DelCommunityInfo\", __WEBPACK_IMPORTED_MODULE_1_qs___default.a.stringify({\n                id: this.communityId\n            })).then(function (response) {\n                var data0 = response.data;\n                if (data0.ErrCode == 0) {\n                    _this4.$Message.success(\"删除社区成功\");\n                    _this4.reloadPage();\n                } else {\n                    _this4.$Message.error(data0.ErrMsg);\n                }\n            }).catch(function (error) {\n                console.log(\"删除社区异常\");\n                console.log(error);\n            });\n        },\n        reloadPage: function reloadPage() {\n            var _this5 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0_axios___default.a.get(\"/admin/GetCommunityList\").then(function (response) {\n                var data0 = response.data;\n                if (response.data.ErrCode == -5) {\n                    Cookies.remove('Admin-Token');\n                    Cookies.remove('UserName');\n                    window.location.reload();\n                }\n                if (data0.ErrCode == 0) {\n                    _this5.data1 = data0.Result;\n                } else {\n                    _this5.$Message.error(data0.ErrMsg);\n                }\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    }\n\n});\n\n/***/ }),\n\n/***/ 709:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Col', {\n    attrs: {\n      \"span\": \"24\"\n    }\n  }, [_c('div', {\n    staticClass: \"doc-header\"\n  }, [_c('br'), _vm._v(\" \"), _c('h3', {\n    attrs: {\n      \"align\": \"center\"\n    }\n  }, [_vm._v(\"社区管理\")]), _vm._v(\" \"), _c('br'), _c('br'), _vm._v(\" \"), _c('Table', {\n    attrs: {\n      \"align\": \"center\",\n      \"columns\": _vm.columns,\n      \"data\": _vm.data1\n    }\n  }), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"新增社区\"\n    },\n    on: {\n      \"on-ok\": _vm.addOk,\n      \"on-cancel\": _vm.addCancel\n    },\n    model: {\n      value: (_vm.model1),\n      callback: function($$v) {\n        _vm.model1 = $$v\n      },\n      expression: \"model1\"\n    }\n  }, [_c('Form', {\n    attrs: {\n      \"model\": _vm.formAdd,\n      \"label-position\": \"top\"\n    }\n  }, [_c('Form-item', {\n    attrs: {\n      \"label\": \"输入名称\"\n    }\n  }, [_c('Input', {\n    model: {\n      value: (_vm.formAdd.input1),\n      callback: function($$v) {\n        _vm.formAdd.input1 = $$v\n      },\n      expression: \"formAdd.input1\"\n    }\n  })], 1)], 1)], 1), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"修改社区名称\"\n    },\n    on: {\n      \"on-ok\": _vm.updateOk,\n      \"on-cancel\": _vm.updateCancel\n    },\n    model: {\n      value: (_vm.model2),\n      callback: function($$v) {\n        _vm.model2 = $$v\n      },\n      expression: \"model2\"\n    }\n  }, [_c('Form', {\n    attrs: {\n      \"model\": _vm.formAdd,\n      \"label-position\": \"top\"\n    }\n  }, [_c('Form-item', {\n    attrs: {\n      \"label\": \"输入名称\"\n    }\n  }, [_c('Input', {\n    model: {\n      value: (_vm.formAdd.input2),\n      callback: function($$v) {\n        _vm.formAdd.input2 = $$v\n      },\n      expression: \"formAdd.input2\"\n    }\n  })], 1)], 1)], 1), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"删除提示\"\n    },\n    on: {\n      \"on-ok\": _vm.delOk,\n      \"on-cancel\": _vm.delCancel\n    },\n    model: {\n      value: (_vm.model3),\n      callback: function($$v) {\n        _vm.model3 = $$v\n      },\n      expression: \"model3\"\n    }\n  }, [_c('p', [_vm._v(\"您将删除 [ \" + _vm._s(_vm.communityName) + \" ]\"), _c('br'), _vm._v(\"是否确认删除?\")])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"doc-header\"\n  }, [_c('Form', {\n    ref: \"formDynamic\",\n    attrs: {\n      \"model\": _vm.formDynamic,\n      \"label-width\": 80\n    }\n  }, [_c('Form-item', [_c('Button', {\n    attrs: {\n      \"type\": \"dashed\",\n      \"long\": \"\",\n      \"icon\": \"plus-round\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.modelAdd()\n      }\n    }\n  }, [_vm._v(\"新增社区\")]), _vm._v(\" \"), _c('Button', {\n    attrs: {\n      \"type\": \"\"\n    }\n  })], 1)], 1)], 1)])], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/45.661d4f98425329e01678.js","var Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./communityManage.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f004e6a\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./communityManage.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/addInfo/communityManage.vue\n// module id = 502\n// module chunks = 45","<template>\n\n    <div>\n\n        <Row>\n            <Col span=\"24\">\n\n                <div style=\"\" class=\"doc-header\">\n                    <br>\n                    <h3 align=\"center\">社区管理</h3>\n                    <br><br>\n                    <!--<Table align=\"center\" :columns=\"columns\" :data=\"data1\">-->\n                    <Table align=\"center\" :columns=\"columns\" :data=\"data1\">\n                    </Table>\n                    <Modal v-model=\"model1\" title=\"新增社区\" @on-ok=\"addOk\" @on-cancel=\"addCancel\">\n                        <Form :model=\"formAdd\" label-position=\"top\">\n                            <Form-item label=\"输入名称\">\n                                <Input v-model=\"formAdd.input1\"></Input>\n                            </Form-item>\n                        </Form>\n                    </Modal>\n                    <Modal v-model=\"model2\" title=\"修改社区名称\" @on-ok=\"updateOk\" @on-cancel=\"updateCancel\">\n                        <Form :model=\"formAdd\" label-position=\"top\">\n                            <Form-item label=\"输入名称\">\n                                <Input v-model=\"formAdd.input2\"></Input>\n                            </Form-item>\n                        </Form>\n                    </Modal>\n                    <Modal v-model=\"model3\" title=\"删除提示\" @on-ok=\"delOk\" @on-cancel=\"delCancel\">\n                        <p>您将删除 [ {{communityName}} ]<br>是否确认删除?</p>\n                    </Modal>\n\n                </div>\n                <div style=\"\" class=\"doc-header\">\n                    <Form ref=\"formDynamic\" :model=\"formDynamic\" :label-width=\"80\">\n                        <Form-item>\n                            <Button type=\"dashed\" long @click=\"modelAdd()\" icon=\"plus-round\">新增社区</Button>\n                            <Button type=\"\"></Button>\n                        </Form-item>\n                    </Form>\n                </div>\n            </Col>\n        </Row>\n    </div>\n\n</template>\n<script>\n    import axios from \"axios\";\n    import qs from \"qs\";\n\n    export default {\n        data() {\n            return {\n                model1: false,\n                model2: false,\n                model3: false,\n                communityId: 0,\n                communityName: \"\",\n                formAdd: {\n                    input1: \"\",\n                    input2: \"\"\n                },\n                columns: [\n                    {\n                        title: '社区编号',\n                        align: 'center',\n                        key: 'Id'\n                    },\n                    {\n                        title: '社区名称',\n                        align: 'center',\n                        key: 'Communityname'\n                    },\n\n                    {\n                        title: '操作',\n                        key: 'action',\n                        align: 'center',\n                        render: (h, params) => {\n                            return h('div', [\n                                h('Button', {\n                                    props: {\n                                        type: 'success',\n                                        size: 'small'\n                                    },\n                                    style: {\n                                        marginRight: '5px'\n                                    },\n                                    on: {\n                                        click: () => {\n                                            this.modelUpdate(params.index)\n                                        }\n                                    }\n                                }, '修改'),\n                                h('Button', {\n                                    props: {\n                                        type: 'primary',\n                                        size: 'small'\n                                    },\n                                    style: {\n                                        marginRight: '5px'\n                                    },\n                                    on: {\n                                        click: () => {\n                                            this.meetManage(params.index)\n                                        }\n                                    }\n                                }, '会议'),\n                                h('Button', {\n                                    props: {\n                                        type: 'error',\n                                        size: 'small'\n                                    },\n                                    on: {\n                                        click: () => {\n                                            this.modelDel(params.index)\n                                        }\n                                    }\n                                }, '删除')\n                            ]);\n                        }\n                    }\n                ],\n                data1: [],\n                formDynamic: {\n                    items: [\n                        {\n                            value: 'xin'\n                        }\n                    ]\n                },\n            }\n        },//data\n        created() {\n            this.reloadPage();\n        },\n        methods: {\n            updateName() {//修改社区信息\n                // todo update the name of community to DB\n                axios.post(\"/admin/UpdateCommunityInfo\", qs.stringify({//pass double\n                    id: this.communityId,\n                    communityname: this.formAdd.input2\n                })).then(response => {\n                    const data0 = response.data;\n                    if (data0.ErrCode == 0) {\n                        this.$Message.success(\"修改成功\");\n                        this.formAdd.input2 = \"\";\n                        this.reloadPage();//修改成功后刷新当前界面\n                    } else {\n                        this.$Message.error(data0.ErrMsg);\n                    }\n                }).catch(error => {\n                    console.log(\"修改社区异常\");\n                    console.log(error);\n                });\n            },\n\n            modelAdd() {\n                this.model1 = true;\n            },\n            addOk() {\n                this.model1 = false;\n                if (this.formAdd.input1 != \"\") {\n                    this.handleAdd();\n                } else {\n                    this.$Message.error(\"社区名不能为空\");\n                }\n            },\n            addCancel() {\n                this.model1 = false;\n                this.formAdd.input1 = \"\";\n            },\n            modelUpdate(index) {\n                this.communityId = this.data1[index].Id;\n                this.model2 = true;\n            },\n            updateOk() {\n                this.model2 = false;\n                if (this.formAdd.input2 != \"\") {\n                    this.updateName();\n                } else {\n                    this.$Message.error(\"社区名不能为空\");\n                }\n            },\n            updateCancel() {\n                this.model2 = false;\n                this.formAdd.input2 = \"\";\n            },\n            modelDel(index) {\n                this.model3 = true;\n                this.communityName = this.data1[index].Communityname;\n                this.communityId = this.data1[index].Id;\n            },\n            delOk() {\n                this.model3 = false;\n                this.handleRemove();\n            },\n            delCancel() {\n                this.model3 = false;\n            },\n\n            meetManage(index) {\n                this.$router.push({\n                    path: '/addInfo/meetManage', query: {\n                        index: this.data1[index].Id\n                    }\n                });\n            },\n            handleAdd() {//添加新的社区\n                axios.post(\"/admin/AddCommunityInfo\", qs.stringify({//pass double\n                    communityname: this.formAdd.input1\n                })).then(response => {\n                    const data0 = response.data;\n                    if (data0.ErrCode == 0) {\n                        this.$Message.success(\"添加社区成功\");\n                        this.formAdd.input1 = \"\";\n                        this.reloadPage();//添加成功后刷新当前界面\n                    } else {//社区已存在的情况\n                        this.$Message.error(data0.ErrMsg);\n                    }\n                }).catch(error => {\n                    console.log('添加社区异常');\n                    console.log(error);\n                })\n            },\n            handleRemove() {//删除社区\n                // todo delete community from DB\n                axios.post(\"/admin/DelCommunityInfo\", qs.stringify({//pass double\n                    id: this.communityId\n                })).then(response => {\n                    const data0 = response.data;\n                    if (data0.ErrCode == 0) {\n                        this.$Message.success(\"删除社区成功\");\n                        this.reloadPage();//删除成功后刷新当前界面\n                    } else {\n                        this.$Message.error(data0.ErrMsg);\n                    }\n                }).catch(error => {\n                    console.log(\"删除社区异常\");\n                    console.log(error);\n                });\n            },\n            reloadPage() {//加载社区\n                //todo select info\n                axios.get(\"/admin/GetCommunityList\").then(response => {//pass double\n                    const data0 = response.data;\n                    if(response.data.ErrCode==-5){//未登录时清除cookies并回到登录页\n                        Cookies.remove('Admin-Token');\n                        Cookies.remove('UserName');\n                        window.location.reload();\n                    }\n                    if(data0.ErrCode==0){\n                        this.data1 = data0.Result;\n                    }else {\n                        this.$Message.error(data0.ErrMsg);\n                    }\n                }).catch(error => {\n                    console.log(error);\n                })\n            }\n        }\n\n    }\n</script>\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// communityManage.vue?cea84190","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Col', {\n    attrs: {\n      \"span\": \"24\"\n    }\n  }, [_c('div', {\n    staticClass: \"doc-header\"\n  }, [_c('br'), _vm._v(\" \"), _c('h3', {\n    attrs: {\n      \"align\": \"center\"\n    }\n  }, [_vm._v(\"社区管理\")]), _vm._v(\" \"), _c('br'), _c('br'), _vm._v(\" \"), _c('Table', {\n    attrs: {\n      \"align\": \"center\",\n      \"columns\": _vm.columns,\n      \"data\": _vm.data1\n    }\n  }), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"新增社区\"\n    },\n    on: {\n      \"on-ok\": _vm.addOk,\n      \"on-cancel\": _vm.addCancel\n    },\n    model: {\n      value: (_vm.model1),\n      callback: function($$v) {\n        _vm.model1 = $$v\n      },\n      expression: \"model1\"\n    }\n  }, [_c('Form', {\n    attrs: {\n      \"model\": _vm.formAdd,\n      \"label-position\": \"top\"\n    }\n  }, [_c('Form-item', {\n    attrs: {\n      \"label\": \"输入名称\"\n    }\n  }, [_c('Input', {\n    model: {\n      value: (_vm.formAdd.input1),\n      callback: function($$v) {\n        _vm.formAdd.input1 = $$v\n      },\n      expression: \"formAdd.input1\"\n    }\n  })], 1)], 1)], 1), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"修改社区名称\"\n    },\n    on: {\n      \"on-ok\": _vm.updateOk,\n      \"on-cancel\": _vm.updateCancel\n    },\n    model: {\n      value: (_vm.model2),\n      callback: function($$v) {\n        _vm.model2 = $$v\n      },\n      expression: \"model2\"\n    }\n  }, [_c('Form', {\n    attrs: {\n      \"model\": _vm.formAdd,\n      \"label-position\": \"top\"\n    }\n  }, [_c('Form-item', {\n    attrs: {\n      \"label\": \"输入名称\"\n    }\n  }, [_c('Input', {\n    model: {\n      value: (_vm.formAdd.input2),\n      callback: function($$v) {\n        _vm.formAdd.input2 = $$v\n      },\n      expression: \"formAdd.input2\"\n    }\n  })], 1)], 1)], 1), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"删除提示\"\n    },\n    on: {\n      \"on-ok\": _vm.delOk,\n      \"on-cancel\": _vm.delCancel\n    },\n    model: {\n      value: (_vm.model3),\n      callback: function($$v) {\n        _vm.model3 = $$v\n      },\n      expression: \"model3\"\n    }\n  }, [_c('p', [_vm._v(\"您将删除 [ \" + _vm._s(_vm.communityName) + \" ]\"), _c('br'), _vm._v(\"是否确认删除?\")])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"doc-header\"\n  }, [_c('Form', {\n    ref: \"formDynamic\",\n    attrs: {\n      \"model\": _vm.formDynamic,\n      \"label-width\": 80\n    }\n  }, [_c('Form-item', [_c('Button', {\n    attrs: {\n      \"type\": \"dashed\",\n      \"long\": \"\",\n      \"icon\": \"plus-round\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.modelAdd()\n      }\n    }\n  }, [_vm._v(\"新增社区\")]), _vm._v(\" \"), _c('Button', {\n    attrs: {\n      \"type\": \"\"\n    }\n  })], 1)], 1)], 1)])], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4f004e6a\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/addInfo/communityManage.vue\n// module id = 709\n// module chunks = 45"],"sourceRoot":""}