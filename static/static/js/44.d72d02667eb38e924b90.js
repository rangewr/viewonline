webpackJsonp([44],{504:function(t,e,o){var n=o(6)(o(592),o(697),null,null,null);t.exports=n.exports},592:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(194),i=o.n(n),r=o(34),a=o.n(r),l=o(74),s=o.n(l),d=o(40),u=o.n(d);e.default={data:function(){var t=this;return{userLoginName:"",userRealName:"",userCardId:"",userId:"",model1:"",model2:!1,model3:!1,model4:!1,model5:!1,formSel:{input1:"",input2:-1,input3:-1},formTop:{input1:"",input2:"",input3:"",input4:"",input5:"",input6:"",input7:"",input8:"",input9:"",input0:""},formAdd:{input0:"",input1:"",input2:"",input3:"",input4:"",input5:"",input6:"",input7:"",input8:""},communityList:[],Canloginstate:[{Id:0,state:"是"},{Id:1,state:"否"}],userType:[{Id:0,typeName:"管理员"},{Id:1,typeName:"普通用户"}],columns:[{title:"用户编号",key:"Id"},{title:"登录名",key:"Loginname"},{title:"用户类型",key:"Usertype"},{title:"真实姓名",key:"Realname"},{title:"手机号码",key:"Mobileno"},{title:"身份证号码",key:"Cardid"},{title:"所属社区",key:"Communityid"},{title:"注册时间",key:"Registertime"},{title:"最新登陆时间",key:"Lastlogintime"},{title:"责任人名称",key:"Personliablename"},{title:"是否可登录直播",key:"Canloginstate"},{title:"操作",key:"action",width:170,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.updateUser(o.index)}}},"修改"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.delUser(o.index)}}},"删除")])}}],data1:[],formDynamic:{items:[{value:"xin"}]}}},created:function(){this.initCommunityList(),this.reloadPage()},methods:{selectUser:function(){this.model4=!0},updateUser:function(t){this.model2=!0;for(var e=0;e<this.communityList.length;e++)this.data1[t].Communityid==this.communityList[e].Communityname&&(this.formTop.input1=this.communityList[e].Id);this.formTop.input0=this.data1[t].Id,this.formTop.input2=this.data1[t].Loginname,this.formTop.input4=this.data1[t].Realname,this.formTop.input5=this.data1[t].Mobileno,this.formTop.input6=this.data1[t].Cardid;for(var e=0;e<this.userType.length;e++)this.data1[t].Usertype==this.userType[e].typeName&&(this.formTop.input7=this.userType[e].Id);this.formTop.input8=this.data1[t].Personliablename;for(var e=0;e<this.Canloginstate.length;e++)this.data1[t].Canloginstate==this.Canloginstate[e].state&&(this.formTop.input9=this.Canloginstate[e].Id)},initCommunityList:function(){var t=this;a.a.get("/admin/GetCommunityList").then(function(e){-5==e.data.ErrCode&&(u.a.remove("Admin-Token"),u.a.remove("UserName"),window.location.reload()),0==e.data.ErrCode?t.communityList=e.data.Result:t.$Message.error(e.data.ErrMsg)}).catch(function(t){console.log(t)})},handleAdd:function(){this.model3=!0},selOk:function(){this.model4=!1,this.reloadPage()},selCancel:function(){},ok:function(){var t=this;this.model2=!1,""!=this.formTop.input8?a.a.post("/admin/UpdateUserInfo",s.a.stringify({id:this.formTop.input0,loginname:this.formTop.input2,loginpwd:this.formTop.input3,usertype:this.formTop.input7,realname:this.formTop.input4,mobileno:this.formTop.input5,cardid:this.formTop.input6,communityid:this.formTop.input1,personliablename:this.formTop.input8,canloginstate:this.formTop.input9})).then(function(e){var o=e.data;0==o.ErrCode?(t.$Message.success("修改成功"),t.reloadPage()):t.$Message.error(o.ErrMsg)}).catch(function(t){console.log("更新会议信息异常"),console.log(t)}):this.$Message.error("密码不能为空")},cancel:function(){console.log("click the [update] cancel key")},addOk:function(){var t=this;this.model3=!1,""!=this.formAdd.input1?""!=this.formAdd.input2?""!=this.formAdd.input3?0==this.formAdd.input4||1==this.formAdd.input4?""!=this.formAdd.input5?""!=this.formAdd.input6?""!=this.formAdd.input7?0==this.formAdd.input8||1==this.formAdd.input8?this.formAdd.input0==this.formAdd.input3?a.a.post("/admin/AddUserInfo",s.a.stringify({loginname:this.formAdd.input2,loginpwd:this.formAdd.input3,usertype:this.formAdd.input4,realname:this.formAdd.input5,mobileno:this.formAdd.input2,cardid:this.formAdd.input6,communityid:this.formAdd.input1,personliablename:this.formAdd.input7,canloginstate:this.formAdd.input8})).then(function(e){var o=e.data;0==o.ErrCode?(t.$Message.success("新增用户成功"),t.formAdd.input0="",t.formAdd.input1="",t.formAdd.input2="",t.formAdd.input3="",t.formAdd.input4="",t.formAdd.input5="",t.formAdd.input6="",t.formAdd.input7="",t.formAdd.input8="",t.reloadPage()):t.$Message.error(o.ErrMsg)}).catch(function(t){console.log("新增用户异常"),console.log(t)}):this.$Message.error("两次密码不一致"):this.$Message.error("是否可登录直播项不能为空"):this.$Message.error("责任人不能为空"):this.$Message.error("身份证号不能为空"):this.$Message.error("真实姓名不能为空"):this.$Message.error("用户类型不能为空"):this.$Message.error("密码不能为空"):this.$Message.error("手机号不能为空"):this.$Message.error("社区名称不能为空")},addCancel:function(){this.formAdd.input2="",this.formAdd.input3="",this.formAdd.input4="",this.formAdd.input5="",console.log("click the [add] cancel key")},delUser:function(t){this.model5=!0,this.userLoginName=this.data1[t].Loginname,this.userRealName=this.data1[t].Realname,this.userCardId=this.data1[t].Cardid,this.userId=this.data1[t].Id},delOk:function(){this.model5=!1,this.handleRemove()},delCancel:function(){this.model5=!1,console.log("click the [delCancel] key to cancel")},handleRemove:function(){var t=this;a.a.post("/admin/DelUserInfo",s.a.stringify({id:this.userId})).then(function(e){var o=e.data;0==o.ErrCode?(t.$Message.success("删除用户成功"),t.reloadPage()):t.$Message.error(o.ErrMsg)}).catch(function(t){console.log("删除用户异常"),console.log(t)})},reloadPage:function(){var t=this;a.a.get("/admin/GetUserList",{params:{loginname:this.formSel.input1,communityid:void 0==this.formSel.input2?-1:this.formSel.input2,usertype:void 0==this.formSel.input3?-1:this.formSel.input3}}).then(function(e){var o=e.data;if(0==o.ErrCode){if(t.data1=e.data.Result,0!=t.data1.length)for(var n=0;n<t.data1.length;n++){for(var i=0;i<t.userType.length;i++)t.data1[n].Usertype==t.userType[i].Id&&(t.data1[n].Usertype=t.userType[i].typeName);for(var i=0;i<t.communityList.length;i++)t.data1[n].Communityid==t.communityList[i].Id&&(t.data1[n].Communityid=t.communityList[i].Communityname);for(var i=0;i<t.Canloginstate.length;i++)t.data1[n].Canloginstate==t.Canloginstate[i].Id&&(t.data1[n].Canloginstate=t.Canloginstate[i].state)}}else t.$Message.error(o.ErrMsg);t.formSel.input1="",t.formSel.input2=-1,t.formSel.input3=-1}).catch(function(t){console.log(t)})},formatFunction:function(t){var e=t.toJSON(),o=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");console.log(o),console.log(void 0===o?"undefined":i()(o));var n=new Date(o.replace(/-/,"/"));return console.log(n),console.log(void 0===n?"undefined":i()(n)),o}}}},697:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Row",[o("Col",{attrs:{span:"24"}},[o("div",{staticClass:"doc-header"},[o("br"),t._v(" "),o("h3",{attrs:{align:"center"}},[t._v("用户管理")]),t._v(" "),o("br"),o("br"),t._v(" "),o("Table",{attrs:{align:"center",columns:t.columns,data:t.data1}}),t._v(" "),o("br"),o("br"),t._v(" "),o("Modal",{attrs:{title:"高级查询"},on:{"on-ok":t.selOk,"on-cancel":t.selCancel},model:{value:t.model4,callback:function(e){t.model4=e},expression:"model4"}},[o("Form",{attrs:{model:t.formSel,"label-position":"top"}},[o("Form-item",{attrs:{label:"登录名"}},[o("Input",{model:{value:t.formSel.input1,callback:function(e){t.formSel.input1=e},expression:"formSel.input1"}})],1),t._v(" "),o("Form-item",{attrs:{label:"社区名称"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formSel.input2,expression:"formSel.input2"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formSel.input2=e.target.multiple?o:o[0]}}},t._l(t.communityList,function(e){return o("option",{attrs:{name:"sendSymbolId"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.Communityname)+"\n                                ")])}))]),t._v(" "),o("Form-item",{attrs:{label:"用户类型"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formSel.input3,expression:"formSel.input3"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formSel.input3=e.target.multiple?o:o[0]}}},t._l(t.userType,function(e){return o("option",{attrs:{name:"userType"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.typeName)+"\n                                ")])}))])],1)],1),t._v(" "),o("Modal",{attrs:{title:"修改用户信息"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.model2,callback:function(e){t.model2=e},expression:"model2"}},[o("Form",{attrs:{model:t.formTop,"label-position":"top"}},[o("Form-item",{attrs:{label:"社区名称"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formTop.input1,expression:"formTop.input1"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formTop.input1=e.target.multiple?o:o[0]}}},t._l(t.communityList,function(e){return o("option",{attrs:{name:"sendSymbolId"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.Communityname)+"\n                                ")])}))]),t._v(" "),o("Form-item",{attrs:{label:"登录名"}},[o("Input",{attrs:{readonly:""},model:{value:t.formTop.input2,callback:function(e){t.formTop.input2=e},expression:"formTop.input2"}})],1),t._v(" "),o("Form-item",{attrs:{label:"设置新密码"}},[o("Input",{attrs:{type:"password"},model:{value:t.formTop.input3,callback:function(e){t.formTop.input3=e},expression:"formTop.input3"}})],1),t._v(" "),o("Form-item",{attrs:{label:"真实姓名"}},[o("Input",{model:{value:t.formTop.input4,callback:function(e){t.formTop.input4=e},expression:"formTop.input4"}})],1),t._v(" "),o("Form-item",{attrs:{label:"手机号码"}},[o("Input",{model:{value:t.formTop.input5,callback:function(e){t.formTop.input5=e},expression:"formTop.input5"}})],1),t._v(" "),o("Form-item",{attrs:{label:"身份证号"}},[o("Input",{model:{value:t.formTop.input6,callback:function(e){t.formTop.input6=e},expression:"formTop.input6"}})],1),t._v(" "),o("Form-item",{attrs:{label:"用户类型"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formTop.input7,expression:"formTop.input7"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formTop.input7=e.target.multiple?o:o[0]}}},t._l(t.userType,function(e){return o("option",{attrs:{name:"sendSymbolId"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.typeName)+"\n                                ")])}))]),t._v(" "),o("Form-item",{attrs:{label:"责任人名称"}},[o("Input",{model:{value:t.formTop.input8,callback:function(e){t.formTop.input8=e},expression:"formTop.input8"}})],1),t._v(" "),o("Form-item",{attrs:{label:"是否可登录直播系统"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formTop.input9,expression:"formTop.input9"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formTop.input9=e.target.multiple?o:o[0]}}},t._l(t.Canloginstate,function(e){return o("option",{attrs:{name:"sendSymbolId"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.state)+"\n                                ")])}))])],1)],1),t._v(" "),o("Modal",{attrs:{title:"新增用户"},on:{"on-ok":t.addOk,"on-cancel":t.addCancel},model:{value:t.model3,callback:function(e){t.model3=e},expression:"model3"}},[o("Form",{attrs:{model:t.formAdd,"label-position":"top"}},[o("Form-item",{attrs:{label:"社区名称"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formAdd.input1,expression:"formAdd.input1"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formAdd.input1=e.target.multiple?o:o[0]}}},t._l(t.communityList,function(e){return o("option",{attrs:{name:"sendSymbolId"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.Communityname)+"\n                                ")])}))]),t._v(" "),o("Form-item",{attrs:{label:"手机号码"}},[o("Input",{model:{value:t.formAdd.input2,callback:function(e){t.formAdd.input2=e},expression:"formAdd.input2"}})],1),t._v(" "),o("Form-item",{attrs:{label:"密码"}},[o("Input",{attrs:{type:"password"},model:{value:t.formAdd.input3,callback:function(e){t.formAdd.input3=e},expression:"formAdd.input3"}})],1),t._v(" "),o("Form-item",{attrs:{label:"确认密码"}},[o("Input",{attrs:{type:"password"},model:{value:t.formAdd.input0,callback:function(e){t.formAdd.input0=e},expression:"formAdd.input0"}})],1),t._v(" "),o("Form-item",{attrs:{label:"用户类型"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formAdd.input4,expression:"formAdd.input4"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formAdd.input4=e.target.multiple?o:o[0]}}},t._l(t.userType,function(e){return o("option",{attrs:{name:"userType"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.typeName)+"\n                                ")])}))]),t._v(" "),o("Form-item",{attrs:{label:"真实姓名"}},[o("Input",{model:{value:t.formAdd.input5,callback:function(e){t.formAdd.input5=e},expression:"formAdd.input5"}})],1),t._v(" "),o("Form-item",{attrs:{label:"身份证号码"}},[o("Input",{model:{value:t.formAdd.input6,callback:function(e){t.formAdd.input6=e},expression:"formAdd.input6"}})],1),t._v(" "),o("Form-item",{attrs:{label:"责任人名称"}},[o("Input",{model:{value:t.formAdd.input7,callback:function(e){t.formAdd.input7=e},expression:"formAdd.input7"}})],1),t._v(" "),o("Form-item",{attrs:{label:"是否可登录直播系统"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formAdd.input8,expression:"formAdd.input8"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.formAdd.input8=e.target.multiple?o:o[0]}}},t._l(t.Canloginstate,function(e){return o("option",{attrs:{name:"canLogin"},domProps:{value:e.Id}},[t._v("\n                                    "+t._s(e.state)+"\n                                ")])}))])],1)],1),t._v(" "),o("Modal",{attrs:{title:"删除提示"},on:{"on-ok":t.delOk,"on-cancel":t.delCancel},model:{value:t.model5,callback:function(e){t.model5=e},expression:"model5"}},[o("p",[t._v("您将删除 [ "+t._s(t.userLoginName)+" ]"),o("br"),t._v("用户姓名 [ "+t._s(t.userRealName)+" ]"),o("br"),t._v("身份证号 [ "+t._s(t.userCardId)+" ]"),o("br"),t._v("是否确认删除?\n                    ")])])],1),t._v(" "),o("div",{staticClass:"doc-header"},[o("Form",{ref:"formDynamic",attrs:{model:t.formDynamic,"label-width":80}},[o("Form-item",{staticStyle:{"margin-left":"0px"}},[o("Button",{attrs:{type:"primary",long:""},on:{click:function(e){t.selectUser()}}},[t._v("高级查询")])],1),t._v(" "),o("Form-item",[o("Button",{staticStyle:{color:"#fff","background-color":"orange",border:"1px solid orange"},attrs:{type:"solid",long:"",icon:"plus-round"},on:{click:function(e){t.handleAdd()}}},[t._v("新增用户\n                        ")])],1)],1)],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=44.d72d02667eb38e924b90.js.map