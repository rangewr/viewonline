webpackJsonp([25],{503:function(e,t,i){function n(e){i(650)}var o=i(6)(i(591),i(690),n,null,null);e.exports=o.exports},591:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(34),o=i.n(n),r=i(74),a=i.n(r);t.default={data:function(){var e=this;return{formInline:[{user:""}],model1:"",model2:!1,model3:!1,model4:!1,model5:!1,meetingId:0,meetingName:"",meetingContent:"",formTop:{input1:"",input2:"",input3:"",input4:"",input5:""},formSel:{input1:"",input2:-1,input3:0,input4:"",input5:""},formAdd:{input1:"",input2:"",input3:"",input4:"",input5:""},communityList:[],meetStateList:[{Id:-1,stateName:"请选择"},{Id:0,stateName:"未开始"},{Id:1,stateName:"进行中"},{Id:2,stateName:"已结束"}],columns:[{title:"会议编号",key:"Id"},{title:"社区名称",key:"Communityid"},{title:"会议名称",key:"Meetingname"},{title:"会议内容",key:"Meetingcontent"},{title:"开始时间",key:"Begintime"},{title:"结束时间",key:"Endtime"},{title:"会议状态",key:"Meetingstate"},{title:"操作",key:"action",width:170,align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.updateMeet(i.index)}}},"修改"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.userManage(i.index)}}},"用户"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.modelDelete(i.index)}}},"删除")])}}],data1:[],formDynamic:{items:[{value:"xin"}]}}},created:function(){this.initcommunity(),this.reloadPage()},methods:{updateMeet:function(e){if("未开始"==this.data1[e].Meetingstate){this.model2=!0;for(var t=0;t<this.communityList.length;t++)this.communityList[t].Communityname==this.data1[e].Communityid&&(this.formTop.input1=this.communityList[t].Id);this.formTop.input2=this.data1[e].Meetingname,this.formTop.input3=this.data1[e].Meetingcontent,this.formTop.input4=this.data1[e].Begintime,this.formTop.input5=this.data1[e].Endtime,this.meetingId=this.data1[e].Id}else this.$Message.error("[进行中] [已结束]的会议不可修改")},meetSelects:function(){this.model5=!0,this.formSel.input4=this.weekBefore(),this.formSel.input5=this.weekAfter()},userManage:function(e){this.$router.push({path:"/addInfo/userManage",query:{index:this.data1[e].Id}})},handleAdd:function(){this.model3=!0,this.initcommunity()},initcommunity:function(){var e=this;o.a.get("/admin/GetCommunityList").then(function(t){-5==t.data.ErrCode&&(Cookies.remove("Admin-Token"),Cookies.remove("UserName"),window.location.reload()),e.communityList=t.data.Result;var i=e.$route.query.index;void 0!=i&&(e.formAdd.input1=i,e.formSel.input3=i)}).catch(function(e){console.log(e)})},ok:function(){var e=this;if(this.model2=!1,""!=this.formTop.input1)if(""!=this.formTop.input2)if(""!=this.formTop.input3)if(""!=this.formTop.input4)if(""!=this.formTop.input5){var t=this.formTop.input4<this.formTop.input5;t?o.a.post("/admin/UpdateMeetingInfo",a.a.stringify({id:this.meetingId,meetingname:this.formTop.input2,meetingcontent:this.formTop.input3,communityid:this.formTop.input1,begintime:this.formatFunction(this.formTop.input4),endtime:this.formatFunction(this.formTop.input5)})).then(function(t){0==t.data.ErrCode&&(e.$Message.success("修改成功"),e.reloadPage())}).catch(function(e){console.log("更新会议信息异常"),console.log(e)}):this.$Message.error("结束时间不能晚于开始时间")}else this.$Message.error("结束时间不能为空");else this.$Message.error("开始时间不能为空");else this.$Message.error("会议内容不能为空");else this.$Message.error("会议名称不能为空");else this.$Message.error("社区名称不能为空")},cancel:function(){console.log("click the [update] cancel key")},meetSelOk:function(){this.model5=!1,this.reloadPage()},meetSelCancel:function(){this.model5=!1},addOk:function(){var e=this;if(this.model3=!1,""!=this.formAdd.input1)if(""!=this.formAdd.input2)if(""!=this.formAdd.input3)if(""!=this.formAdd.input4)if(""!=this.formAdd.input5){var t=this.formAdd.input4<this.formAdd.input5;t?o.a.post("/admin/AddMeetingInfo",a.a.stringify({meetingcontent:this.formAdd.input3,meetingname:this.formAdd.input2,communityid:this.formAdd.input1,begintime:this.formatFunction(this.formAdd.input4),endtime:this.formatFunction(this.formAdd.input5)})).then(function(t){var i=t.data;0==i.ErrCode?(e.$Message.success("新增成功"),e.reloadPage(),e.formAdd.input1="",e.formAdd.input2="",e.formAdd.input3="",e.formAdd.input4="",e.formAdd.input5=""):e.$Message.error(i.ErrMsg)}).catch(function(e){console.log("新增会议异常"),console.log(e)}):this.$Message.error("结束时间不能晚于开始时间")}else this.$Message.error("结束时间不能为空");else this.$Message.error("开始时间不能为空");else this.$Message.error("会议内容不能为空");else this.$Message.error("会议名称不能为空");else this.$Message.error("社区名称不能为空")},addCancel:function(){this.formAdd.input1="",this.formAdd.input2="",this.formAdd.input3="",this.formAdd.input4="",this.formAdd.input5="",console.log("click the [add] cancel key")},modelDelete:function(e){var t=this.data1[e].Id;this.meetingId=t,this.meetingName=this.data1[e].Meetingname,this.meetingContent=this.data1[e].Meetingcontent,this.model4=!0},delOk:function(){this.handleRemove(),this.model4=!1},delCancel:function(){this.model4=!1},handleRemove:function(){var e=this;o.a.post("/admin/DelMeetingInfo",a.a.stringify({id:this.meetingId})).then(function(t){var i=t.data;0==i.ErrCode?(e.$Message.success("删除会议成功"),e.reloadPage()):e.$Message.error(i.ErrMsg)}).catch(function(e){console.log("删除会议异常"),console.log(e)})},reloadPage:function(){var e=this;o.a.get("/admin/GetMeetingList",{params:{meetingname:this.formSel.input1,meetingstate:void 0==this.formSel.input2?-1:this.formSel.input2,communityid:void 0==this.formSel.input3?0:this.formSel.input3,begintime:""==this.formSel.input4?"":this.formatFunction(this.formSel.input4),endtime:""==this.formSel.input5?"":this.formatFunction(this.formSel.input5)}}).then(function(t){e.data1=t.data.Result,-5==t.data.ErrCode&&(Cookies.remove("Admin-Token"),Cookies.remove("UserName"),window.location.reload()),e.formSel.input1="",e.formSel.input2=-1,e.formSel.input3=0,e.formSel.input4="",e.formSel.input5="";for(var i=0;i<t.data.Result.length;i++){for(var n=e.data1[i].Communityid,o=0;o<e.communityList.length;o++)e.communityList[o].Id==n&&(e.data1[i].Communityid=e.communityList[o].Communityname);switch(e.data1[i].Meetingstate){case 0:e.data1[i].Meetingstate="未开始";break;case 1:e.data1[i].Meetingstate="进行中";break;case 2:e.data1[i].Meetingstate="已结束"}}}).catch(function(e){console.log(e)})},formatFunction:function(e){if("string"!=typeof e){var t=e.toJSON();return new Date(+new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}return e},weekBefore:function(){var e=new Date,t=new Date(e.getTime()-6048e5),i=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=i+"-"+n+"-"+o+" "+r+":"+a+":"+s;return console.log("weekBefore===\n"+l),l},weekAfter:function(){var e=new Date,t=new Date(e.getTime()+6048e5),i=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=i+"-"+n+"-"+o+" "+r+":"+a+":"+s;return console.log("weekAfter===\n"+l),l}}}},617:function(e,t,i){t=e.exports=i(477)(!0),t.push([e.i,"select{height:32px;padding:4px 7px;font-size:12px;border:1px solid #dddee1;border-radius:4px;color:#495060;transition:border .2s ease-in-out,background .2s ease-in-out,box-shadow .2s ease-in-out,-webkit-box-shadow .2s ease-in-out;width:80%}","",{version:3,sources:["G:/vue/vue-wz/src/views/addInfo/meetManage.vue"],names:[],mappings:"AACA,OACI,YAAa,AACb,gBAAiB,AACjB,eAAgB,AAChB,yBAA0B,AAC1B,kBAAmB,AACnB,cAAe,AACf,2HAA+H,AAC/H,SAAW,CACd",file:"meetManage.vue",sourcesContent:["\nselect {\n    height: 32px;\n    padding: 4px 7px;\n    font-size: 12px;\n    border: 1px solid #dddee1;\n    border-radius: 4px;\n    color: #495060;\n    transition: border .2s ease-in-out, background .2s ease-in-out, box-shadow .2s ease-in-out, -webkit-box-shadow .2s ease-in-out;\n    width: 80%;\n}\n"],sourceRoot:""}])},650:function(e,t,i){var n=i(617);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(478)("50646904",n,!0)},690:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Row",[i("Col",{attrs:{span:"24"}},[i("div",{staticClass:"doc-header"},[i("br"),e._v(" "),i("h3",{attrs:{align:"center"}},[e._v("会议管理")]),e._v(" "),i("br"),i("br"),e._v(" "),i("br"),i("br"),e._v(" "),i("Table",{attrs:{align:"center",columns:e.columns,data:e.data1}}),e._v(" "),i("br"),i("br"),e._v(" "),i("Modal",{attrs:{title:"条件查询"},on:{"on-ok":e.meetSelOk,"on-cancel":e.meetSelCancel},model:{value:e.model5,callback:function(t){e.model5=t},expression:"model5"}},[i("Form",{attrs:{model:e.formSel,"label-position":"top"}},[i("Form-item",{attrs:{label:"会议名称"}},[i("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"输入会议名称"},model:{value:e.formSel.input1,callback:function(t){e.formSel.input1=t},expression:"formSel.input1"}})],1),e._v(" "),i("Form-item",{attrs:{label:"会议状态"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.formSel.input2,expression:"formSel.input2"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.formSel.input2=t.target.multiple?i:i[0]}}},e._l(e.meetStateList,function(t){return i("option",{attrs:{name:"sendSymbolId"},domProps:{value:t.Id}},[e._v("\n                                    "+e._s(t.stateName)+"\n                                ")])}))]),e._v(" "),i("Form-item",{attrs:{label:"社区名称"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.formSel.input3,expression:"formSel.input3"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.formSel.input3=t.target.multiple?i:i[0]}}},e._l(e.communityList,function(t){return i("option",{attrs:{name:"sendSymbolId"},domProps:{value:t.Id}},[e._v("\n                                    "+e._s(t.Communityname)+"\n                                ")])}))]),e._v(" "),i("Form-item",{attrs:{label:"开始时间"}},[i("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"开始日期和时间"},model:{value:e.formSel.input4,callback:function(t){e.formSel.input4=t},expression:"formSel.input4"}})],1),e._v(" "),i("Form-item",{attrs:{label:"结束时间"}},[i("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"结束日期和时间"},model:{value:e.formSel.input5,callback:function(t){e.formSel.input5=t},expression:"formSel.input5"}})],1)],1)],1),e._v(" "),i("Modal",{attrs:{title:"修改会议"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.model2,callback:function(t){e.model2=t},expression:"model2"}},[i("Form",{attrs:{model:e.formTop,"label-position":"top"}},[i("Form-item",{attrs:{label:"社区名称"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.formTop.input1,expression:"formTop.input1"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.formTop.input1=t.target.multiple?i:i[0]}}},e._l(e.communityList,function(t){return i("option",{attrs:{name:"sendSymbolId"},domProps:{value:t.Id}},[e._v("\n                                    "+e._s(t.Communityname)+"\n                                ")])}))]),e._v(" "),i("Form-item",{attrs:{label:"会议名称"}},[i("Input",{model:{value:e.formTop.input2,callback:function(t){e.formTop.input2=t},expression:"formTop.input2"}})],1),e._v(" "),i("Form-item",{attrs:{label:"会议内容"}},[i("Input",{model:{value:e.formTop.input3,callback:function(t){e.formTop.input3=t},expression:"formTop.input3"}})],1),e._v(" "),i("Form-item",{attrs:{label:"开始时间"}},[i("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"开始日期和时间"},model:{value:e.formTop.input4,callback:function(t){e.formTop.input4=t},expression:"formTop.input4"}})],1),e._v(" "),i("Form-item",{attrs:{label:"结束时间"}},[i("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"结束日期和时间"},model:{value:e.formTop.input5,callback:function(t){e.formTop.input5=t},expression:"formTop.input5"}})],1)],1)],1),e._v(" "),i("Modal",{attrs:{title:"新增会议"},on:{"on-ok":e.addOk,"on-cancel":e.addCancel},model:{value:e.model3,callback:function(t){e.model3=t},expression:"model3"}},[i("Form",{attrs:{model:e.formAdd,"label-position":"top"}},[i("Form-item",{attrs:{label:"社区名称"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.formAdd.input1,expression:"formAdd.input1"}],staticStyle:{width:"100%",padding:"4px 3px",color:"#495060",border:"1px solid #dddee1",height:"32px","border-radius":"4px"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.formAdd.input1=t.target.multiple?i:i[0]}}},e._l(e.communityList,function(t){return i("option",{attrs:{name:"sendSymbolId"},domProps:{value:t.Id}},[e._v("\n                                    "+e._s(t.Communityname)+"\n                                ")])}))]),e._v(" "),i("Form-item",{attrs:{label:"会议名称"}},[i("Input",{model:{value:e.formAdd.input2,callback:function(t){e.formAdd.input2=t},expression:"formAdd.input2"}})],1),e._v(" "),i("Form-item",{attrs:{label:"会议内容"}},[i("Input",{model:{value:e.formAdd.input3,callback:function(t){e.formAdd.input3=t},expression:"formAdd.input3"}})],1),e._v(" "),i("Form-item",{attrs:{label:"开始时间"}},[i("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"开始日期和时间"},model:{value:e.formAdd.input4,callback:function(t){e.formAdd.input4=t},expression:"formAdd.input4"}})],1),e._v(" "),i("Form-item",{attrs:{label:"结束时间"}},[i("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"结束日期和时间"},model:{value:e.formAdd.input5,callback:function(t){e.formAdd.input5=t},expression:"formAdd.input5"}})],1)],1)],1),e._v(" "),i("Modal",{attrs:{title:"删除提示"},on:{"on-ok":e.delOk,"on-cancel":e.delCancel},model:{value:e.model4,callback:function(t){e.model4=t},expression:"model4"}},[i("p",[e._v("您将删除 [ "+e._s(e.meetingName)+" ]"),i("br"),e._v("会议内容 [ "+e._s(e.meetingContent)+" ]"),i("br"),e._v("是否确认删除?")])])],1),e._v(" "),i("div",{staticClass:"doc-header"},[i("Form",{ref:"formDynamic",attrs:{model:e.formDynamic,"label-width":80}},[i("Form-item",[i("Button",{attrs:{type:"primary",long:""},on:{click:function(t){e.meetSelects()}}},[e._v("高级查询")])],1),e._v(" "),i("Form-item",[i("Button",{attrs:{type:"warning",long:"",icon:"plus-round"},on:{click:function(t){e.handleAdd()}}},[e._v("新增会议\n                        ")])],1)],1)],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=25.da0fb8f4cca953c91f64.js.map